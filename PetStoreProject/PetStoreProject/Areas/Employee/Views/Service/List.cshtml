@using PetStoreProject.ViewModels

@{
    var listServices = ViewData["Services"] as List<ServiceViewModel>;

    var listPending = ViewData["listOrderedPending"] as List<BookServiceViewModel>;
    var numberPagePending = ViewData["numberPageOfListPending"];

    var listConfirmed = ViewData["listOrderedConfirmed"] as List<BookServiceViewModel>;
    var numberPageConfirmed = ViewData["numberPageOfListConfirmed"];
}

@section HeadOptional {
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="~/areas/css/list-service-style.css" />
}

<!-- main-content-wrap -->
<div class="main-content-inner">
    <!-- main-content-wrap -->
    <div class="main-content-wrap">
        <div class="flex items-center flex-wrap justify-between gap20 mb-27">
            <h3>Danh Sách Đơn Chờ Xác Nhận</h3>
            <ul class="breadcrumbs flex items-center flex-wrap justify-start gap10">
                <li>
                    <a href="index.html"><div class="text-tiny">Dashboard</div></a>
                </li>
                <li>
                    <i class="icon-chevron-right"></i>
                </li>
                <li>
                    <a href="#"><div class="text-tiny">Page</div></a>
                </li>
                <li>
                    <i class="icon-chevron-right"></i>
                </li>
                <li>
                    <div class="text-tiny">List Page</div>
                </li>
            </ul>
        </div>
        <!-- countries -->
        <div class="wg-box">
            <div class="flex items-center justify-between gap10 flex-wrap">
                <div class="wg-filter flex-grow">
                    <form class="form-search" onsubmit="searchCustomerInfoPending(event)">
                        <input id="customer-info-search-pending" type="text" placeholder="Tên khách hàng hoặc số điện thoại" tabindex="2" equired>
                        <div class="button-submit">
                            <button type="submit"><i class="icon-search"></i></button>
                        </div>
                    </form>
                    <div class="select" style="width: 230px;">
                        <div class="input-group date" id="filter-datepicker">
                            <input type="text" id="order-date-search-pending" onchange="searchOrderDatePending()">
                            <div class="input-group-append">
                                <span class="input-group-text"><i class="fas fa-calendar-alt"></i></span>
                            </div>
                        </div>
                    </div>
                    <div class="flex gap10">
                        <div class="select w200">
                            <select id="service-id-search-pending" onchange="searchServicePending()">
                                <option value="">--Tất cả dịch vụ--</option>
                                @foreach (var service in listServices)
                                {
                                    <option value="@service.ServiceId">@service.Name</option>
                                }
                            </select>
                        </div>
                    </div>
                </div>
                <a class="tf-button style-1 w208" href="#"><i class="icon-plus"></i>Tạo Đơn Mới</a>
            </div>
            <div class="wg-table table-countries wrap-checkbox">
                <ul class="table-title flex gap20 mb-14">
                    <li>
                        <a class="body-title" onclick="selectServiceIdPending()">ID</a>
                    </li>
                    <li>
                        <a class="body-title" onclick="selectCustomerNamePending()">Khách hàng</a>
                    </li>
                    <li>
                        <div class="body-title">Số điện thoại</div>
                    </li>
                    <li>
                        <a class="body-title" onclick="selectOrderDatePending()">Ngày hẹn</a>
                    </li>
                    <li>
                        <a class="body-title" onclick="selectOrderTimePending()">Giờ hẹn</a>
                    </li>
                    <li>
                        <div class="body-title">Dịch vụ</div>
                    </li>
                    <li>
                        <div class="body-title">Trạng thái</div>
                    </li>
                    <li>
                        <div class="body-title">Thao tác</div>
                    </li>
                </ul>
                <ul id="table-order-services-pending" class="flex flex-column">
                    @foreach (var orderedService in listPending)
                    {
                        <li id="order-item-@orderedService.OrderServiceId" class="countries-item">
                            <div class="body-text">#@orderedService.OrderServiceId</div>
                            <div class="body-text name-cell">@orderedService.Name</div>
                            <div class="body-text phone-cell">@orderedService.Phone</div>
                            <div class="body-text orderdate-cell">@orderedService.OrderDate</div>
                            <div class="body-text ordertime-cell">@orderedService.OrderTime.ToString("HH:mm")</div>
                            <div class="body-text servicename-cell">@orderedService.ServiceName</div>
                            <div>
                                <div class="block-pending">@orderedService.Status</div>
                            </div>
                            <div>
                                <div class="list-icon-function">
                                    <a class="item edit order-service-detail-btn" data-orderserviceid="@orderedService.OrderServiceId"><i class="icon-edit-3"></i></a>
                                    <a class="item trash order-service-cancel-btn" data-orderserviceid="@orderedService.OrderServiceId"><i class="icon-trash-2"></i></a>
                                </div>
                            </div>
                        </li>
                    }
                </ul>
            </div>
            <div class="divider"></div>
            <div class="flex items-center justify-between flex-wrap gap10">
                @* <div class="text-tiny">Showing 10 to 16 in 16 records</div> *@
                <nav aria-label="Page navigation example">
                    <ul id="paging-pending" class="pagination">
                    </ul>
                </nav>
            </div>
        </div>
        <!-- /countries -->
    </div>
    <!-- /main-content-wrap -->
</div>
<!-- /main-content-wrap -->
<!-- main-content-wrap -->
<div class="main-content-inner">
    <!-- main-content-wrap -->
    <div class="main-content-wrap">
        <div class="flex items-center flex-wrap justify-between gap20 mb-27">
            <h3>Danh Sách Đã Xác Nhận</h3>
            <ul class="breadcrumbs flex items-center flex-wrap justify-start gap10">
                <li>
                    <a href="index.html"><div class="text-tiny">Dashboard</div></a>
                </li>
                <li>
                    <i class="icon-chevron-right"></i>
                </li>
                <li>
                    <a href="#"><div class="text-tiny">Page</div></a>
                </li>
                <li>
                    <i class="icon-chevron-right"></i>
                </li>
                <li>
                    <div class="text-tiny">List Page</div>
                </li>
            </ul>
        </div>
        <!-- countries -->
        <div class="wg-box">
            <div class="flex items-center justify-between gap10 flex-wrap">
                <div class="wg-filter flex-grow">
                    <form class="form-search" onsubmit="searchCustomerInfoConfirmed(event)">
                        <input id="customer-info-search-confirmed" type="text" placeholder="Tên khách hàng hoặc số điện thoại" tabindex="2" equired>
                        <div class="button-submit">
                            <button type="submit"><i class="icon-search"></i></button>
                        </div>
                    </form>
                    <div class="select">
                        <input type="date" id="order-date-search-confirmed" onchange="searchOrderDateConfirmed()">
                    </div>
                    <div class="flex gap10">
                        <div class="select w200">
                            <select id="service-id-search-confirmed" onchange="searchServiceConfirmed()">
                                <option value="">--Tất cả dịch vụ--</option>
                                @foreach (var service in listServices)
                                {
                                    <option value="@service.ServiceId">@service.Name</option>
                                }
                            </select>
                        </div>
                    </div>
                </div>
                <a class="tf-button style-1 w208" href="#"><i class="icon-plus"></i>Tạo Đơn Mới</a>
            </div>
            <div class="wg-table table-countries wrap-checkbox">
                <ul class="table-title flex gap20 mb-14">
                    <li>
                        <a class="body-title" onclick="selectServiceIdConfirmed()">ID</a>
                    </li>
                    <li>
                        <a class="body-title" onclick="selectCustomerNameConfirmed()">Khách hàng</a>
                    </li>
                    <li>
                        <div class="body-title">Số điện thoại</div>
                    </li>
                    <li>
                        <a class="body-title" onclick="selectOrderDateConfirmed()">Ngày hẹn</a>
                    </li>
                    <li>
                        <a class="body-title" onclick="selectOrderTimeConfirmed()">Giờ hẹn</a>
                    </li>
                    <li>
                        <div class="body-title">Dịch vụ</div>
                    </li>
                    <li>
                        <div class="body-title">Trạng thái</div>
                    </li>
                    <li>
                        <div class="body-title">Thao tác</div>
                    </li>
                </ul>
                <ul id="table-order-services-confirmed" class="flex flex-column">
                    @foreach (var orderedService in listConfirmed)
                    {
                        <li class="countries-item">
                            <div class="body-text">#@orderedService.OrderServiceId</div>
                            <div class="body-text">@orderedService.Name</div>
                            <div class="body-text">@orderedService.Phone</div>
                            <div class="body-text">@orderedService.OrderDate</div>
                            <div class="body-text">@orderedService.OrderTime.ToString("HH:mm")</div>
                            <div class="body-text">@orderedService.ServiceName</div>
                            <div>
                                <div class="block-confirmed">@orderedService.Status</div>
                            </div>
                            <div>
                                <div class="list-icon-function">
                                    <div class="item edit">
                                        <i class="icon-edit-3"></i>
                                    </div>
                                    <div class="item trash">
                                        <i class="icon-trash-2"></i>
                                    </div>
                                </div>
                            </div>
                        </li>
                    }
                </ul>
            </div>
            <div class="divider"></div>
            <div class="flex items-center justify-between flex-wrap gap10">
                @* <div class="text-tiny">Showing 10 to 16 in 16 records</div> *@
                <nav aria-label="Page navigation example">
                    <ul id="paging-confirmed" class="pagination">
                    </ul>
                </nav>
            </div>
        </div>
        <!-- /countries -->
    </div>
    <!-- /main-content-wrap -->
</div>
<!-- /main-content-wrap -->
<!-- Booking service modal start-->
<div class="booking-service-area">
    <div class="container">
        <!--The Modal-->
        <div class="modal fade" id="booking-modal">
            <div class="modal-dialog modal-lg modal-dialog-centered">
                <div class="modal-content">
                    <!-- Modal Header -->
                    <div class="modal-header d-block text-center position-relative pb-3">
                        <h5 class="modal-title d-inline-block">Chi Tiết Lịch Hẹn</h5>
                        <button type="button" class="btn-close position-absolute end-0 mt-1 me-3" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <!-- Modal Header -->
                    <!-- Modal body -->
                    <div class="modal-body" id="booking-modal-content">
                    </div>
                    <!-- Modal body -->
                </div>
            </div>
        </div>
        <!--The Modal-->
    </div>
</div>
<!-- Booking service modal end-->
@section ScriptOptional {
    <script>
        /*Generate Paging Nagivation of  Different Order Sevice Areas for First Time*/
        $(document).ready(function () {
            $(".order-service-detail-btn").click(function () {
                let orderServiceId = $(this).data("orderserviceid");
                orderedServiceDetail(orderServiceId);
            });

            filterDatepicker();

            generatePagingNavigation("#paging-pending", 'Pending', 1, @numberPagePending)
            generatePagingNavigation("#paging-confirmed", 'Confirmed', 1, @numberPageConfirmed)
        });


        function orderedServiceDetail(orderServiceId) {
            console.log(orderServiceId);
            $.ajax({
                type: 'GET',
                url: '/Employee/Service/OrderServiceDetail',
                data: { orderServiceId: orderServiceId },

                success: function (response) {
                    $("#booking-modal-content").html(response);
                    $("#booking-modal").modal("show");

                    // Gắn lại sự kiện submit cho nút submit lịch hẹn đã cập nhật
                    $("#booking-form").on("submit", function (event) {
                        event.preventDefault();
                        updateOrderedService();
                    });

                    // Gắn lại sự kiện click cho nút hủy lịch hẹn
                    // $("#booking-form").on("click", ".cancel-btn", function () {
                    //     var orderServiceId = $(this).data("orderserviceid");
                    //     cancelOrderService(orderServiceId);
                    // });

                    //Gắn lại sự kiện chọn ngày tháng cho thẻ input chọn ngày hẹn
                    orderDatepicker();
                },

                error(xhr, status, error) {
                    console.error("Error:", error);
                }
            });
        }

        function changeService() {
            var serviceSelected = $("#ServiceName").find(":selected");
            var serviceId = serviceSelected.attr("data-serviceid");

            $.ajax({
                type: 'GET',
                url: '/Employee/Service/GetServiceOptionByChangeService',
                data: { serviceId: serviceId },

                success: function (response) {
                    let listPetType = '';
                    response.petTypes.forEach(function (petType) {
                        let isSelected = (response.petType === petType);
                        listPetType += '<option value="' + petType + '"';
                        listPetType += isSelected ? ' selected>' : '>';
                        listPetType += petType + '</option>';
                    });

                    let listWeight = '';
                    response.weights.forEach(function (weight) {
                        let isSelected = (response.weight === weight);
                        listWeight += '<option value="' + weight + '"';
                        listWeight += isSelected ? ' selected>' : '>';
                        listWeight += weight + '</option>';
                    });

                    $("#PetType").html(listPetType);
                    $("#Weight").html(listWeight);
                    $("#Price").val(response.price.toLocaleString('en-US') + ' VND');
                    $("#ServiceId").val(response.serviceId);
                    $("#ServiceOptionId").val(response.serviceOptionId);
                },

                error(xhr, status, error) {
                    console.error("Error:", error);
                }
            });
        }

        function changePetType() {
            var serviceSelected = $("#ServiceName").find(":selected");
            var serviceId = serviceSelected.attr("data-serviceid");
            var petTypeSelected = $("#PetType").find(":selected");
            var petType = petTypeSelected.val();

            $.ajax({
                type: 'GET',
                url: '/Employee/Service/GetServiceOptionByChangePetType',
                data: { serviceId: serviceId, petType: petType },

                success: function (response) {
                    let listWeight = '';
                    response.weights.forEach(function (weight) {
                        let isSelected = (response.weight === weight);
                        listWeight += '<option value="' + weight + '"';
                        listWeight += isSelected ? ' selected>' : '>';
                        listWeight += weight + '</option>';
                    });

                    $("#Weight").html(listWeight);
                    $("#Price").val(response.price.toLocaleString('en-US') + ' VND');
                    $("#ServiceOptionId").val(response.serviceOptionId);
                },

                error(xhr, status, error) {
                    console.error("Error:", error);
                }
            });
        }

        function changeWeight() {
            var serviceSelected = $("#ServiceName").find(":selected");
            var serviceId = serviceSelected.attr("data-serviceid");
            var petTypeSelected = $("#PetType").find(":selected");
            var petType = petTypeSelected.val();
            var weightSelected = $("#Weight").find(":selected");
            var weight = weightSelected.val();

            $.ajax({
                type: 'GET',
                url: '/Employee/Service/GetServiceOptionByChangeWeight',
                data: { serviceId: serviceId, petType: petType, weight: weight },

                success: function (response) {
                    $("#Price").val(response.price.toLocaleString('en-US') + ' VND');
                    $("#ServiceOptionId").val(response.serviceOptionId);
                }
            });
        }

        function updateOrderedService() {
            let orderSeviceId = $("#booking-form").find("#OrderServiceId").val();
            let orderForm = $("#booking-form").serialize();
            $.ajax({
                type: 'POST',
                url: '/Employee/Service/OrderServiceDetail',
                data: orderForm,

                success: function (response) {
                    $("#booking-modal-content").empty();
                    $("#booking-modal-content").html(response);

                    // Thay đổi giá trị ngày hẹn trên bảng order service history nếu update thành công
                    // if ($(response).find(".update-sucsess").length > 0) {
                    //     let orderDate = $(response).find("#OrderDate").val();
                    //     console.log(orderDate);
                    //     let row = $("#main-content").find("#order-item-" + orderSeviceId);
                    //     row.find(".orderdate-cell").text(orderDate);
                    // }

                    //Gắn lại sự kiện submit cho nút submit lịch hẹn đã cập nhật
                    $("#booking-form").on("submit", function (event) {
                        event.preventDefault();
                        updateOrderedService();
                    });

                    // Gắn lại sự kiện click cho nút hủy lịch hẹn
                    // $("#booking-form").on("click", ".cancel-btn", function () {
                    //     var orderServiceId = $(this).data("orderserviceid");
                    //     cancelOrderService(orderServiceId);
                    // });

                    //Gắn lại sự kiện chọn ngày tháng cho thẻ input chọn ngày hẹn
                    orderDatepicker();
                },

                error(xhr, status, error) {
                    console.error("Error:", error);
                }
            });
        }

        /*-----Area of Order Service Is Pending Start-----*/
        let pageSizePending = 5;        //Fixed the size of the pending page to be 10 items, just changing this value will change the page size.
        let pageIndexPending = 1;

        let orderServicePending = {
            status: 'Chưa xác nhận',
            nameOrPhone: null,
            orderDate: null,
            serviceId: null,
            sortServiceId: null,
            sortCustomerName: null,
            sortOrderDate: null,
            sortOrderTime: null
        };

        function resetOptionSortPending() {
            orderServicePending.sortServiceId = null;
            orderServicePending.sortCustomerName = null;
            orderServicePending.sortOrderDate = null;
            orderServicePending.sortOrderTime = null;
        }

        function refreshOrderServicePending() {
            orderServicePending.status = 'Chưa xác nhận';
            orderServicePending.nameOrPhone = $("#customer-info-search-pending").val();
            orderServicePending.orderDate = $("#order-date-search-pending").val();
            orderServicePending.serviceId = $("#service-id-search-pending").find(":selected").val();

            resetOptionSortPending();
            orderServicePending.sortServiceId = 'Ascending';

            pageIndexPending = 1;
        }

        function searchCustomerInfoPending(event) {
            event.preventDefault();
            refreshOrderServicePending();
            fetchNewOrderServicesPending();
        }

        function searchOrderDatePending() {
            refreshOrderServicePending();
            fetchNewOrderServicesPending();
        }

        function searchServicePending() {
            refreshOrderServicePending();
            fetchNewOrderServicesPending();
        }

        function selectServiceIdPending() {
            let currentStateSort = orderServicePending.sortServiceId;
            resetOptionSortPending();
            if (currentStateSort === null || currentStateSort === 'Descending') {
                orderServicePending.sortServiceId = 'Ascending';
            } else {
                orderServicePending.sortServiceId = 'Descending';
            }
            fetchNewOrderServicesPending();
        }

        function selectCustomerNamePending() {
            let currentStateSort = orderServicePending.sortCustomerName;
            resetOptionSortPending();
            if (currentStateSort === null || currentStateSort === 'Descending') {
                orderServicePending.sortCustomerName = 'Ascending';
            } else {
                orderServicePending.sortCustomerName = 'Descending';
            }
            fetchNewOrderServicesPending();
        }

        function selectOrderDatePending() {
            let currentStateSort = orderServicePending.sortOrderDate;
            resetOptionSortPending();
            if (currentStateSort === null || currentStateSort === 'Descending') {
                orderServicePending.sortOrderDate = 'Ascending';
            } else {
                orderServicePending.sortOrderDate = 'Descending';
            }
            fetchNewOrderServicesPending();
        }

        function selectOrderTimePending() {
            let currentStateSort = orderServicePending.sortOrderTime;
            resetOptionSortPending();
            if (currentStateSort === null || currentStateSort === 'Descending') {
                orderServicePending.sortOrderTime = 'Ascending';
            } else {
                orderServicePending.sortOrderTime = 'Descending';
            }
            fetchNewOrderServicesPending();
        }

        function selectPagePending(currentPage) {
            $("#paging-pending").find("li").removeClass("active");
            $("#paging-pending").find("#page-Pending-" + currentPage).addClass("active");

            pageIndexPending = currentPage;
            fetchNewOrderServicesPending();
        }

        function fetchNewOrderServicesPending() {
            console.log('----------------------------------------')
            console.log('nameOrPhone: ', orderServicePending.nameOrPhone)
            console.log('orderDate : ', orderServicePending.orderDate)
            console.log('serviceId : ', orderServicePending.serviceId)
            console.log('sortServiceId:', orderServicePending.sortServiceId);
            console.log('sortCustomerName:', orderServicePending.sortCustomerName);
            console.log('sortOrderDate:', orderServicePending.sortOrderDate);
            console.log('sortOrderTime:', orderServicePending.sortOrderTime);
            console.log('pageIndexConfirmed:', pageIndexConfirmed);
            $.ajax({
                type: 'POST',
                url: '/Employee/Service/OrderedSeviceByConditions',
                data: {
                    orderServiceVM: orderServicePending,
                    pageIndex: pageIndexPending,
                    pageSize: pageSizePending
                },

                success: function (response) {
                    if (response.orderedServices != null && response.orderedServices.length > 0) {
                        let content = '';
                        response.orderedServices.forEach(function (order) {
                            content += `<li id="order-item-${order.orderServiceId}" class="countries-item">
                                            <div class="body-text">#${order.orderServiceId}</div>
                                            <div class="body-text name-cell">${order.name}</div>
                                            <div class="body-text phone-cell">${order.phone}</div>
                                            <div class="body-text orderdate-cell">${order.orderDate}</div>
                                            <div class="body-text ordertime-cell">${order.orderTime.toString().substring(0, 5)}</div>
                                            <div class="body-text servicename-cell">${order.serviceName}</div>
                                            <div>
                                                <div class="block-pending">${order.status}</div>
                                            </div>
                                            <div>
                                                <div class="list-icon-function">
                                                    <a class="item edit order-service-detail-btn" data-orderserviceid="${order.orderServiceId}"><i class="icon-edit-3"></i></a>
                                                    <a class="item trash order-service-cancel-btn" data-orderserviceid="${order.orderServiceId}"><i class="icon-trash-2"></i></a>
                                                </div>
                                            </div>
                                        </li>`;
                        });

                        $('#table-order-services-pending').empty();
                        $('#table-order-services-pending').html(content);
                        $(".order-service-detail-btn").click(function () {
                            let orderServiceId = $(this).data("orderserviceid");
                            orderedServiceDetail(orderServiceId);
                        });

                        generatePagingNavigation("#paging-pending", "Pending", pageIndexPending, response.numberPage);
                    }
                    else {
                        $('#table-order-services-pending').empty();
                        $('#table-order-services-pending').html("Không có đơn nào");
                        $("#paging-pending").empty();
                    }
                },

                error(xhr, status, error) {
                    console.error("Error:", error);
                }

            });
        }
        /*-----Area of Order Service Is Pending Start-----*/


        /*-----Area of Order Service Is Confirmed Start-----*/
        let pageSizeConfirmed = 5;        //Fixed the size of the confirmed page to be 10 items, just changing this value will change the page size.
        let pageIndexConfirmed = 1;

        let orderServiceConfirmed = {
            status: 'Đã xác nhận',
            nameOrPhone: null,
            orderDate: null,
            serviceId: null,
            sortServiceId: null,
            sortCustomerName: null,
            sortOrderDate: null,
            sortOrderTime: null
        };

        function resetOptionSortConfirmed() {
            orderServiceConfirmed.sortServiceId = null;
            orderServiceConfirmed.sortCustomerName = null;
            orderServiceConfirmed.sortOrderDate = null;
            orderServiceConfirmed.sortOrderTime = null;
        }

        function refreshOrderServiceConfirmed() {
            orderServiceConfirmed.status = 'Đã xác nhận';
            orderServiceConfirmed.nameOrPhone = $("#customer-info-search-confirmed").val();
            orderServiceConfirmed.orderDate = $("#order-date-search-confirmed").val();
            orderServiceConfirmed.serviceId = $("#service-id-search-confirmed").find(":selected").val();

            resetOptionSortConfirmed();
            orderServiceConfirmed.sortServiceId = 'Ascending';

            pageIndexConfirmed = 1;
        }

        function searchCustomerInfoConfirmed(event) {
            event.preventDefault();
            refreshOrderServiceConfirmed();
            fetchNewOrderServicesConfirmed();
        }

        function searchOrderDateConfirmed() {
            refreshOrderServiceConfirmed();
            fetchNewOrderServicesConfirmed();
        }

        function searchServiceConfirmed() {
            refreshOrderServiceConfirmed();
            fetchNewOrderServicesConfirmed();
        }

        function selectServiceIdConfirmed() {
            let currentStateSort = orderServiceConfirmed.sortServiceId;
            resetOptionSortConfirmed();
            if (currentStateSort === null || currentStateSort === 'Descending') {
                orderServiceConfirmed.sortServiceId = 'Ascending';
            } else {
                orderServiceConfirmed.sortServiceId = 'Descending';
            }
            fetchNewOrderServicesConfirmed();
        }

        function selectCustomerNameConfirmed() {
            let currentStateSort = orderServiceConfirmed.sortCustomerName;
            resetOptionSortConfirmed();
            if (currentStateSort === null || currentStateSort === 'Descending') {
                orderServiceConfirmed.sortCustomerName = 'Ascending';
            } else {
                orderServiceConfirmed.sortCustomerName = 'Descending';
            }
            fetchNewOrderServicesConfirmed();
        }

        function selectOrderDateConfirmed() {
            let currentStateSort = orderServiceConfirmed.sortOrderDate;
            resetOptionSortConfirmed();
            if (currentStateSort === null || currentStateSort === 'Descending') {
                orderServiceConfirmed.sortOrderDate = 'Ascending';
            } else {
                orderServiceConfirmed.sortOrderDate = 'Descending';
            }
            fetchNewOrderServicesConfirmed();
        }

        function selectOrderTimeConfirmed() {
            let currentStateSort = orderServiceConfirmed.sortOrderTime;
            resetOptionSortConfirmed();
            if (currentStateSort === null || currentStateSort === 'Descending') {
                orderServiceConfirmed.sortOrderTime = 'Ascending';
            } else {
                orderServiceConfirmed.sortOrderTime = 'Descending';
            }
            fetchNewOrderServicesConfirmed();
        }

        function selectPageConfirmed(currentPage) {
            $("#paging-confirmed").find("li").removeClass("active");
            $("#paging-confirmed").find("#page-Confirmed-" + currentPage).addClass("active");

            pageIndexConfirmed = currentPage;
            fetchNewOrderServicesConfirmed();
        }

        function fetchNewOrderServicesConfirmed() {
            console.log('----------------------------------------')
            console.log('nameOrPhone: ', orderServiceConfirmed.nameOrPhone)
            console.log('orderDate : ', orderServiceConfirmed.orderDate)
            console.log('serviceId : ', orderServiceConfirmed.serviceId)
            console.log('sortServiceId:', orderServiceConfirmed.sortServiceId);
            console.log('sortCustomerName:', orderServiceConfirmed.sortCustomerName);
            console.log('sortOrderDate:', orderServiceConfirmed.sortOrderDate);
            console.log('sortOrderTime:', orderServiceConfirmed.sortOrderTime);
            console.log('pageIndexConfirmed:', pageIndexConfirmed);

            $.ajax({
                type: 'POST',
                url: '/Employee/Service/OrderedSeviceByConditions',
                data: {
                    orderServiceVM: orderServiceConfirmed,
                    pageIndex: pageIndexConfirmed,
                    pageSize: pageSizeConfirmed
                },

                success: function (response) {
                    if (response.orderedServices != null && response.orderedServices.length > 0) {
                        let content = '';
                        response.orderedServices.forEach(function (order) {
                            content += `<li id="order-item-${order.orderServiceId}" class="countries-item">
                                            <div class="body-text">#${order.orderServiceId}</div>
                                            <div class="body-text name-cell">${order.name}</div>
                                            <div class="body-text phone-cell">${order.phone}</div>
                                            <div class="body-text orderdate-cell">${order.orderDate}</div>
                                            <div class="body-text ordertime-cell">${order.orderTime.toString().substring(0, 5)}</div>
                                            <div class="body-text servicename-cell">${order.serviceName}</div>
                                            <div>
                                                <div class="block-pending">${order.status}</div>
                                            </div>
                                            <div>
                                                <div class="list-icon-function">
                                                    <a class="item edit order-service-detail-btn" data-orderserviceid="${order.orderServiceId}"><i class="icon-edit-3"></i></a>
                                                    <a class="item trash order-service-cancel-btn" data-orderserviceid="${order.orderServiceId}"><i class="icon-trash-2"></i></a>
                                                </div>
                                            </div>
                                        </li>`;
                        });

                        $('#table-order-services-confirmed').empty();
                        $('#table-order-services-confirmed').html(content);
                        generatePagingNavigation("#paging-confirmed", "Confirmed", pageIndexConfirmed, response.numberPage);
                    }
                    else {
                        $('#table-order-services-confirmed').empty();
                        $('#table-order-services-confirmed').html("Không có đơn nào");
                        $("#paging-confirmed").empty();
                    }
                },

                error(xhr, status, error) {
                    console.error("Error:", error);
                }

            });
        }
        /*-----Area of Order Service Is Confirmed Start-----*/

        function generatePagingNavigation(elementId, orderType, currentPage, numberPage) {
            if (numberPage > 0) {
                let content = '';
                for (let i = 1; i <= numberPage; i++) {
                    if (currentPage === i) {
                        content += ` <li id="page-${orderType}-${i}" class="page-item active"><a class="page-link" href="javascript:void(0);" onclick="selectPage${orderType}(${i})">${i}</a></li>`;
                    }
                    else {
                        content += ` <li id="page-${orderType}-${i}" class="page-item"><a class="page-link" href="javascript:void(0);" onclick="selectPage${orderType}(${i})">${i}</a></li>`;
                    }
                }
                $(elementId).html(content);
            } else {
                $(elementId).empty();
            }
        }

        function filterDatepicker() {
            $('#filter-datepicker').datepicker({
                format: "dd/mm/yyyy",
                weekStart: 1,
                startView: 0,
                startDate: "1/1/2020",
                maxViewMode: 1,
                language: "vi",
                autoclose: true,
                orientation: "bottom auto",
            });
        }

        function orderDatepicker() {
            let tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);

            $('#order-datepicker').datepicker({
                format: "dd/mm/yyyy",
                weekStart: 1,
                startView: 0,
                startDate: tomorrow,
                maxViewMode: 1,
                language: "vi",
                autoclose: true,
                orientation: "bottom auto",
            });
        };
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/locales/bootstrap-datepicker.vi.min.js"></script>
}

